{"ast":null,"code":"var _jsxFileName = \"/home/mateus/sd-014-b-project-recipes-app/src/pages/MealsDetails.js\";\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport LikeAndShare from '../Components/LikeAndShare';\nimport CarouselDrinks from '../Components/CarouselDrinks';\nimport StartRecipeBtn from '';\nimport '../styles/recipesDetails.css';\nconst RECIPE_PHOTO = 'recipe-photo';\nconst RECIPE_TITLE = 'recipe-title';\nconst RECIPE_CATEGORY = 'recipe-category';\n\nconst INGREDIENT_NAME_AND_MEASURE = index => `${index}-ingredient-name-and-measure`;\n\nconst INSTRUCTIONS = 'instructions';\nconst VIDEO = 'video';\nconst randomEndpoint = 'https://www.themealdb.com/api/json/v1/1/random.php';\n\nconst idEndpoint = id => `https://www.themealdb.com/api/json/v1/1/lookup.php?i=${id}`;\n\nconst drinkEndpoint = 'https://www.thecocktaildb.com/api/json/v1/1/search.php?s=';\n\nfunction MealsDetails({\n  match: {\n    params: {\n      id\n    }\n  }\n}) {\n  const [recipe, setRecipe] = useState([]);\n  const [cocktails, setCocktails] = useState([]);\n\n  const getDrinks = async () => {\n    const {\n      drinks\n    } = await fetch(drinkEndpoint).then(results => results.json());\n    setCocktails(drinks);\n  };\n\n  const getRecipe = async () => {\n    await fetch(idEndpoint(id)).then(response => response.json()).then(data => setRecipe(data.meals[0]));\n  };\n\n  const getRandom = async () => {\n    await fetch(randomEndpoint).then(response => response.json()).then(data => setRecipe(data.meals[0]));\n  };\n\n  useEffect(() => {\n    if (!id) {\n      getRandom();\n    } else {\n      getRecipe();\n    }\n  });\n  useEffect(() => {\n    getDrinks();\n  }, []);\n  const {\n    strMealThumb,\n    strMeal,\n    strCategory,\n    strInstructions,\n    strYoutube\n  } = recipe;\n\n  function embed(str) {\n    const array = typeof str === 'string' ? str.split('=') : '';\n    const prefix = 'https://www.youtube.com/embed/';\n    return prefix.concat(array[1]);\n  }\n\n  function returnValue(a, b, string) {\n    if (a.toLowerCase().includes(string) && b) {\n      return b;\n    }\n\n    return undefined;\n  }\n\n  const entries = Object.entries(recipe);\n  const ingredients = entries.map(e => returnValue(e[0], e[1], 'ingredient')).filter(e => e !== undefined);\n  const measurements = entries.map(e => returnValue(e[0], e[1], 'measure')).filter(e => e !== undefined);\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: \"recipe-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": RECIPE_PHOTO,\n    alt: `${strMeal} dish`,\n    src: strMealThumb,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, \"Detalhes\"), /*#__PURE__*/React.createElement(\"h2\", {\n    \"data-testid\": RECIPE_TITLE,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, strMeal), /*#__PURE__*/React.createElement(LikeAndShare, {\n    id: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": RECIPE_CATEGORY,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, strCategory), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, ingredients.map((e, index) => /*#__PURE__*/React.createElement(\"li\", {\n    key: index,\n    \"data-testid\": INGREDIENT_NAME_AND_MEASURE(index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, `${e} - ${measurements[index]}`))), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"method\",\n    \"data-testid\": INSTRUCTIONS,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }, strInstructions), /*#__PURE__*/React.createElement(\"iframe\", {\n    className: \"videobox\",\n    width: \"560\",\n    height: \"315\",\n    \"data-testid\": VIDEO,\n    src: embed(strYoutube),\n    title: \"YouTube video player\",\n    frameBorder: \"0\",\n    allow: \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\n    allowFullScreen: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CarouselDrinks, {\n    cocktails: cocktails,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(StartRecipeBtn, {\n    id: id,\n    type: \"comidas\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }));\n}\n\nMealsDetails.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired\n    })\n  })\n};\nMealsDetails.defaultProps = {\n  match: {}\n};\nexport default MealsDetails;","map":{"version":3,"sources":["/home/mateus/sd-014-b-project-recipes-app/src/pages/MealsDetails.js"],"names":["React","useState","useEffect","PropTypes","LikeAndShare","CarouselDrinks","StartRecipeBtn","RECIPE_PHOTO","RECIPE_TITLE","RECIPE_CATEGORY","INGREDIENT_NAME_AND_MEASURE","index","INSTRUCTIONS","VIDEO","randomEndpoint","idEndpoint","id","drinkEndpoint","MealsDetails","match","params","recipe","setRecipe","cocktails","setCocktails","getDrinks","drinks","fetch","then","results","json","getRecipe","response","data","meals","getRandom","strMealThumb","strMeal","strCategory","strInstructions","strYoutube","embed","str","array","split","prefix","concat","returnValue","a","b","string","toLowerCase","includes","undefined","entries","Object","ingredients","map","e","filter","measurements","propTypes","shape","isRequired","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport LikeAndShare from '../Components/LikeAndShare';\nimport CarouselDrinks from '../Components/CarouselDrinks';\nimport StartRecipeBtn from ''\nimport '../styles/recipesDetails.css';\n\nconst RECIPE_PHOTO = 'recipe-photo';\nconst RECIPE_TITLE = 'recipe-title';\nconst RECIPE_CATEGORY = 'recipe-category';\nconst INGREDIENT_NAME_AND_MEASURE = (index) => `${index}-ingredient-name-and-measure`;\nconst INSTRUCTIONS = 'instructions';\nconst VIDEO = 'video';\n\nconst randomEndpoint = 'https://www.themealdb.com/api/json/v1/1/random.php';\nconst idEndpoint = (id) => `https://www.themealdb.com/api/json/v1/1/lookup.php?i=${id}`;\nconst drinkEndpoint = 'https://www.thecocktaildb.com/api/json/v1/1/search.php?s=';\n\nfunction MealsDetails({ match: { params: { id } } }) {\n  const [recipe, setRecipe] = useState([]);\n  const [cocktails, setCocktails] = useState([]);\n\n  const getDrinks = async () => {\n    const { drinks } = await fetch(drinkEndpoint)\n      .then((results) => results.json());\n    setCocktails(drinks);\n  };\n\n  const getRecipe = async () => {\n    await fetch(idEndpoint(id))\n      .then((response) => response.json())\n      .then((data) => setRecipe(data.meals[0]));\n  };\n\n  const getRandom = async () => {\n    await fetch(randomEndpoint)\n      .then((response) => response.json())\n      .then((data) => setRecipe(data.meals[0]));\n  };\n\n  useEffect(() => {\n    if (!id) {\n      getRandom();\n    } else {\n      getRecipe();\n    }\n  });\n\n  useEffect(() => { getDrinks(); }, []);\n\n  const { strMealThumb, strMeal, strCategory, strInstructions, strYoutube } = recipe;\n\n  function embed(str) {\n    const array = typeof (str) === 'string' ? str.split('=') : '';\n    const prefix = 'https://www.youtube.com/embed/';\n    return prefix.concat(array[1]);\n  }\n\n  function returnValue(a, b, string) {\n    if (a.toLowerCase().includes(string) && b) {\n      return b;\n    }\n    return undefined;\n  }\n\n  const entries = Object.entries(recipe);\n  const ingredients = entries.map((e) => returnValue(e[0], e[1], 'ingredient'))\n    .filter((e) => e !== undefined);\n  const measurements = entries.map((e) => returnValue(e[0], e[1], 'measure'))\n    .filter((e) => e !== undefined);\n\n  return (\n    <section className=\"recipe-card\">\n      <img data-testid={ RECIPE_PHOTO } alt={ `${strMeal} dish` } src={ strMealThumb } />\n      <h1>Detalhes</h1>\n      <h2 data-testid={ RECIPE_TITLE }>{strMeal}</h2>\n      <LikeAndShare id={ id } />\n      <p data-testid={ RECIPE_CATEGORY }>{strCategory}</p>\n      <ul>\n        { ingredients.map((e, index) => (\n          <li key={ index } data-testid={ INGREDIENT_NAME_AND_MEASURE(index) }>\n            {`${e} - ${measurements[index]}`}\n          </li>\n        ))}\n      </ul>\n      <p className=\"method\" data-testid={ INSTRUCTIONS }>{strInstructions}</p>\n      <iframe\n        className=\"videobox\"\n        width=\"560\"\n        height=\"315\"\n        data-testid={ VIDEO }\n        src={ embed(strYoutube) }\n        title=\"YouTube video player\"\n        frameBorder=\"0\"\n        allow=\"accelerometer;\n        autoplay;\n        clipboard-write;\n        encrypted-media;\n        gyroscope;\n        picture-in-picture\"\n        allowFullScreen\n      />\n      <CarouselDrinks cocktails={ cocktails } />\n      <StartRecipeBtn id={ id } type=\"comidas\" />\n    </section>\n  );\n}\n\nMealsDetails.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired,\n    }),\n  }),\n};\n\nMealsDetails.defaultProps = {\n  match: {},\n};\n\nexport default MealsDetails;\n"]},"metadata":{},"sourceType":"module"}