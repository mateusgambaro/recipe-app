{"ast":null,"code":"var _jsxFileName = \"/home/mateus/sd-014-b-project-recipes-app/src/pages/Drinks.js\";\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector } from 'react-redux';\nimport Footer from '../Components/Footer';\nimport Header from '../Components/Header';\nimport SearchCard from '../Components/SearchCard';\nimport { fetchDrinksNameAPI } from '../services/drinksAPI';\nimport CategoryButtons from '../Components/CategoryButtons';\nconst TWELVE = 12;\n\nfunction Drinks({\n  history\n}) {\n  const [drinkSearch, setDrinkSearch] = useState([]);\n  const [isFetched, setIsFetched] = useState(false);\n  const [initialRecipes, setInitialRecipes] = useState([]);\n  const [isClicked, setIsClicked] = useState(false);\n  const [isCatClicked, setIsCatClicked] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const resultsFromGlobalState = useSelector(state => state.searchReducer.results);\n  const isClickedFromGlobalState = useSelector(state => state.searchReducer.isClicked);\n  const isClickedFromGlobal = useSelector(state => state.searchReducer.isCategoryClicked);\n  useEffect(() => {\n    setIsCatClicked(isClickedFromGlobal);\n  }, [isClickedFromGlobal]);\n  useEffect(() => {\n    setIsFetched(false);\n\n    async function getInitialRecipes() {\n      const recipes = await fetchDrinksNameAPI('');\n      setInitialRecipes(recipes);\n      setIsFetched(true);\n    }\n\n    getInitialRecipes(); // setInitialRecipes()\n  }, []);\n  useEffect(() => {\n    setDrinkSearch(resultsFromGlobalState);\n    setSubmitted(true);\n  }, [resultsFromGlobalState]);\n  useEffect(() => {\n    if (submitted === true && drinkSearch.drinks && drinkSearch.drinks.length === 1 && isClicked) {\n      history.push(`/bebidas/${drinkSearch.drinks[0].idDrink}`);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [drinkSearch]);\n  useEffect(() => {\n    setIsClicked(isClickedFromGlobalState);\n  }, [isClickedFromGlobalState]);\n  return isFetched ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    title: \"Bebidas\",\n    search: true,\n    meals: false,\n    type: \"drinks\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(CategoryButtons, {\n    meal: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }), drinkSearch.length === 0 || !drinkSearch.drinks || isCatClicked ? initialRecipes.drinks.filter((_, idx) => idx < TWELVE).map(({\n    strDrink,\n    strDrinkThumb,\n    idDrink\n  }, index) => /*#__PURE__*/React.createElement(SearchCard, {\n    key: idDrink,\n    picture: strDrinkThumb,\n    name: strDrink,\n    id: idDrink,\n    index: index,\n    meals: false,\n    \"data-testid\": `${index}-recipe-card`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 15\n    }\n  })) : drinkSearch.drinks.filter((_, idx) => idx < TWELVE).map(({\n    strDrink,\n    strDrinkThumb,\n    idDrink\n  }, index) => /*#__PURE__*/React.createElement(SearchCard, {\n    key: idDrink,\n    picture: strDrinkThumb,\n    name: strDrink,\n    id: idDrink,\n    index: index,\n    meals: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  })) : 'loading';\n}\n\nDrinks.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired\n  }).isRequired\n};\nexport default Drinks;","map":{"version":3,"sources":["/home/mateus/sd-014-b-project-recipes-app/src/pages/Drinks.js"],"names":["React","useEffect","useState","PropTypes","useSelector","Footer","Header","SearchCard","fetchDrinksNameAPI","CategoryButtons","TWELVE","Drinks","history","drinkSearch","setDrinkSearch","isFetched","setIsFetched","initialRecipes","setInitialRecipes","isClicked","setIsClicked","isCatClicked","setIsCatClicked","submitted","setSubmitted","resultsFromGlobalState","state","searchReducer","results","isClickedFromGlobalState","isClickedFromGlobal","isCategoryClicked","getInitialRecipes","recipes","drinks","length","push","idDrink","filter","_","idx","map","strDrink","strDrinkThumb","index","propTypes","shape","func","isRequired"],"mappings":"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","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\n\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector } from 'react-redux';\nimport Footer from '../Components/Footer';\nimport Header from '../Components/Header';\nimport SearchCard from '../Components/SearchCard';\nimport { fetchDrinksNameAPI } from '../services/drinksAPI';\nimport CategoryButtons from '../Components/CategoryButtons';\n\nconst TWELVE = 12;\n\nfunction Drinks({ history }) {\n  const [drinkSearch, setDrinkSearch] = useState([]);\n  const [isFetched, setIsFetched] = useState(false);\n  const [initialRecipes, setInitialRecipes] = useState([]);\n  const [isClicked, setIsClicked] = useState(false);\n  const [isCatClicked, setIsCatClicked] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const resultsFromGlobalState = useSelector((state) => (\n    state.searchReducer.results));\n  const isClickedFromGlobalState = useSelector((state) => (\n    state.searchReducer.isClicked));\n  const isClickedFromGlobal = useSelector((state) => (\n    state.searchReducer.isCategoryClicked));\n\n  useEffect(() => {\n    setIsCatClicked(isClickedFromGlobal);\n  }, [isClickedFromGlobal]);\n\n  useEffect(() => {\n    setIsFetched(false);\n    async function getInitialRecipes() {\n      const recipes = await fetchDrinksNameAPI('');\n      setInitialRecipes(recipes);\n      setIsFetched(true);\n    }\n    getInitialRecipes();\n    // setInitialRecipes()\n  }, []);\n\n  useEffect(() => {\n    setDrinkSearch(resultsFromGlobalState);\n    setSubmitted(true);\n  }, [resultsFromGlobalState]);\n\n  useEffect(() => {\n    if (submitted === true && drinkSearch.drinks && drinkSearch.drinks.length === 1\n      && isClicked) {\n      history.push(`/bebidas/${drinkSearch.drinks[0].idDrink}`);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [drinkSearch]);\n\n  useEffect(() => {\n    setIsClicked(isClickedFromGlobalState);\n  }, [isClickedFromGlobalState]);\n\n  return (\n    isFetched ? (\n      <>\n        <header>\n          <Header title=\"Bebidas\" search meals={ false } type=\"drinks\" />\n        </header>\n        <CategoryButtons meal={ false } />\n        { drinkSearch.length === 0 || !drinkSearch.drinks || isCatClicked\n          ? initialRecipes.drinks.filter((_, idx) => idx < TWELVE)\n            .map(({ strDrink, strDrinkThumb, idDrink }, index) => (\n              <SearchCard\n                key={ idDrink }\n                picture={ strDrinkThumb }\n                name={ strDrink }\n                id={ idDrink }\n                index={ index }\n                meals={ false }\n                data-testid={ `${index}-recipe-card` }\n              />\n            ))\n          : drinkSearch.drinks.filter((_, idx) => idx < TWELVE)\n            .map(({ strDrink, strDrinkThumb, idDrink }, index) => (\n              <SearchCard\n                key={ idDrink }\n                picture={ strDrinkThumb }\n                name={ strDrink }\n                id={ idDrink }\n                index={ index }\n                meals={ false }\n              />\n            )) }\n        <Footer />\n      </>\n    ) : 'loading'\n  );\n}\n\nDrinks.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n  }).isRequired,\n};\n\nexport default Drinks;\n"]},"metadata":{},"sourceType":"module"}